<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <!--1.什么是ajax？
    与服务器交换数据并更新部分网页的艺术，在不重新加载整个页面的情况下
-->

    <script>
        window.onload = function (ev) {
            var oBtn = document.querySelector("button");
            oBtn.onclick = function (evl) {
                //1创建一个异步对象
                var  xmlhttp = new XMLHttpRequest();
                //2设置请求方式和请求地址；
                /*
                method：请求类型：get或post
                url:文件在服务器上的位置；
                async：true（异步）或false（同步）

                //如需兼容ie6,5 则按如下写法；
                        var xmlhttp;
                    if (window.XMLHttpRequest)
                      {// code for IE7+, Firefox, Chrome, Opera, Safari
                      xmlhttp=new XMLHttpRequest();
                      }
                    else
                      {// code for IE6, IE5
                      xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");  }


                 */


                //在ie浏览器中，如果通过Ajax发送get请求，那么ie浏览器认为在同一个url只有一个结果；04-ajax-get.php===abc
                //解决方法为获取随机数
                // Math().random();
                // new Date().getTime();
                xmlhttp.open("GET","04-ajax-get.php?t="+(new Date().getTime()),true);
                //3.发送请求
                xmlhttp.send();
                //4.监听状态的变化
                xmlhttp.onreadystatechange =function (ev2) {
                    /*
                    0: 请求未初始化
                    1: 服务器连接已建立
                    2: 请求已接收
                    3: 请求处理中
                    4: 请求已完成，且响应已就绪
                    * */

                    //5处理返回的结果

                    if (xmlhttp.readyState===4) {
                        if (xmlhttp.status>=200&&xmlhttp.status<300||xmlhttp.status===304) {
                           // console.log("接收到服务器返回的数据");

                        }else {
                            console.log("没有接收到服务器返回的数据");
                        }
                    }
                }
            }
        }
    </script>
</head>
<body>
<button>发送请求</button>
</body>
</html>